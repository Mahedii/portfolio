import{c as i}from"./Toastr-bncgRa57.js";import{_ as p,h as _,o as r,c as m,b as t,w as f,d as n,v as c,F as y,r as v,a as g,t as h,e as D}from"./index-Rclj0A4P.js";const M={data(){return{formData:{methodName:null},fetchedFormData:{selectedPaymentMethodId:null,methodName:null,accountName:null,accountNumber:null,bankName:null,expireDate:null,cvc:null},paymentMethodsList:[]}},created(){this.fetchPaymentMethods()},methods:{async fetchPaymentMethods(){try{let a={type:"read"};this.axios.post("/payment-methods/data",a).then(e=>{this.paymentMethodsList=e.data.paymentMethods})}catch(a){console.error("Error fetching payment methods:",a)}},async addPaymentMethods(){try{this.isSubmitting=!0;let a={method:this.formData.methodName,type:"create"};this.axios.post("/payment-methods/create",a).then(e=>{e.data.status==200?(i.toastrMessage(e.data.message,"success"),this.resetForm(),this.fetchPaymentMethods()):i.toastrMessage(e.data.message,"error")}).catch(e=>(this.isSubmitting=!1,console.log(e),e))}catch(a){return this.isSubmitting=!1,console.log(a),a}},async resetForm(a=null){if(a=="update")var e=this.fetchedFormData;else var e=this.formData;e.methodName=null},formatRelativeDate(a){return _(a).fromNow()},async updatePaymentMethodInfos(){try{this.isSubmitting=!0;let a={id:this.fetchedFormData.selectedPaymentMethodId,methodName:this.fetchedFormData.methodName,accountName:this.fetchedFormData.accountName,accountNumber:this.fetchedFormData.accountNumber,bankName:this.fetchedFormData.bankName,expireDate:this.fetchedFormData.expireDate,cvc:this.fetchedFormData.cvc,type:"update"};console.log(a),this.axios.post("/payment-methods/update",a).then(e=>{e.data.status==200?(i.toastrMessage(e.data.message,"success"),jQuery("#editModal").modal("hide"),this.resetForm(),this.fetchPaymentMethods()):i.toastrMessage(e.data.message,"error")}).catch(e=>(this.isSubmitting=!1,console.log(e),e))}catch(a){return this.isSubmitting=!1,console.log(a),a}},async openEditModal(a){let e={type:"read",subType:"payment-method-info",id:a.id};const d=await this.axios.post("/payment-methods/data",e);this.fetchedFormData.selectedPaymentMethodId=a.id,this.fetchedFormData.methodName=a.method,d.data.paymentMethodWithInfos.length>0&&(this.fetchedFormData.accountName=d.data.paymentMethodWithInfos[0].account_name,this.fetchedFormData.accountNumber=d.data.paymentMethodWithInfos[0].account_number,this.fetchedFormData.bankName=d.data.paymentMethodWithInfos[0].bank_name,this.fetchedFormData.expireDate=d.data.paymentMethodWithInfos[0].expire_date,this.fetchedFormData.cvc=d.data.paymentMethodWithInfos[0].cvc),jQuery("#editModal").modal("show")},async changeStatus(a){let e={type:"change-status",id:a};const d=await this.axios.post("/payment-methods/update",e);d.data.status==200?(this.fetchPaymentMethods(),i.toastrMessage(d.data.message,"success")):i.toastrMessage(d.data.message,"error")}}},N={class:"page-content"},x={class:"container-fluid"},F=g('<div class="row"><div class="col-12"><div class="page-title-box d-sm-flex align-items-center justify-content-between"><h4 class="mb-sm-0">Payment Methods</h4><div class="page-title-right"><ol class="breadcrumb m-0"><li class="breadcrumb-item"><a href="javascript: void(0);">Payment Methods</a></li><li class="breadcrumb-item active">Create</li></ol></div></div></div></div>',1),k={class:"row"},w={class:"col-xxl-12"},P={class:"card"},S=t("div",{class:"card-header align-items-center d-flex"},[t("h4",{class:"card-title mb-0 flex-grow-1"},"Payment Methods")],-1),E={class:"card-body"},C={class:"live-preview"},I={class:"col-md-12"},V=t("label",{for:"subcategory",class:"form-label"},"Method Name",-1),U=t("div",{class:"col-12"},[t("div",{class:"text-end"},[t("button",{type:"submit",class:"btn btn-primary"},"Add")])],-1),L={class:"modal fade",id:"editModal",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true"},W={class:"modal-dialog"},j={class:"modal-content"},A=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"varyingcontentModalLabel"},"Update form"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),B={class:"modal-body"},T={class:"mb-3"},Q=t("label",{for:"",class:"form-label"},"Payment Method",-1),R={class:"mb-3"},O=t("label",{for:"",class:"form-label"},"Account Name",-1),q={class:"mb-3"},z=t("label",{for:"",class:"form-label"},"Account Number",-1),G={class:"mb-3"},H=t("label",{for:"",class:"form-label"},"Bank Name",-1),J={class:"mb-3"},K=t("label",{for:"",class:"form-label"},"Expire Date",-1),X={class:"mb-3"},Y=t("label",{for:"",class:"form-label"},"CVC",-1),Z=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-light","data-bs-dismiss":"modal"},"Close"),t("button",{type:"submit",class:"btn btn-primary"},"Save Changes")],-1),$={class:"row"},tt={class:"col-lg-12"},et={class:"card"},at=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},"Payment Methods List")],-1),st={class:"card-body"},ot={id:"example",class:"table table-bordered dt-responsive nowrap table-striped align-middle",style:{width:"100%"}},dt=t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"Method"),t("th",null,"Status"),t("th",null,"Created"),t("th",null,"Action")])],-1),lt=["onClick"],nt=["onClick"],ct={class:"dropdown d-inline-block"},it=t("button",{class:"btn btn-soft-secondary btn-sm dropdown",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"ri-more-fill align-middle"})],-1),rt={class:"dropdown-menu dropdown-menu-end"},mt=["onClick"],ht=t("i",{class:"ri-pencil-fill align-bottom me-2 text-muted"},null,-1);function ut(a,e,d,bt,o,l){return r(),m("div",N,[t("div",x,[F,t("div",k,[t("div",w,[t("div",P,[S,t("div",E,[t("div",C,[t("form",{onSubmit:e[1]||(e[1]=f((...s)=>l.addPaymentMethods&&l.addPaymentMethods(...s),["prevent"])),class:"row g-3"},[t("div",I,[V,n(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.formData.methodName=s),type:"text",class:"form-control",placeholder:"Enter method name"},null,512),[[c,o.formData.methodName]])]),U],32)])])])])]),t("div",L,[t("div",W,[t("div",j,[t("form",{onSubmit:e[8]||(e[8]=f((...s)=>l.updatePaymentMethodInfos&&l.updatePaymentMethodInfos(...s),["prevent"]))},[A,t("div",B,[t("div",T,[Q,n(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.fetchedFormData.methodName=s),type:"text",class:"form-control",placeholder:"Enter method name"},null,512),[[c,o.fetchedFormData.methodName]])]),t("div",R,[O,n(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.fetchedFormData.accountName=s),type:"text",class:"form-control",placeholder:"Enter account name"},null,512),[[c,o.fetchedFormData.accountName]])]),t("div",q,[z,n(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.fetchedFormData.accountNumber=s),type:"text",class:"form-control",placeholder:"Enter account number"},null,512),[[c,o.fetchedFormData.accountNumber]])]),t("div",G,[H,n(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.fetchedFormData.bankName=s),type:"text",class:"form-control",placeholder:"Enter bank name"},null,512),[[c,o.fetchedFormData.bankName]])]),t("div",J,[K,n(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.fetchedFormData.expireDate=s),type:"date",class:"form-control",placeholder:"Enter account expire date"},null,512),[[c,o.fetchedFormData.expireDate]])]),t("div",X,[Y,n(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>o.fetchedFormData.cvc=s),type:"text",class:"form-control",placeholder:"Enter cvc no"},null,512),[[c,o.fetchedFormData.cvc]])])]),Z],32)])])]),t("div",$,[t("div",tt,[t("div",et,[at,t("div",st,[t("table",ot,[dt,t("tbody",null,[(r(!0),m(y,null,v(o.paymentMethodsList,(s,u)=>(r(),m("tr",{key:u},[t("td",null,h(++u),1),t("td",null,h(s.method),1),t("td",null,[s.status=="1"?(r(),m("button",{key:0,class:"btn btn-soft-danger mx-2",onClick:b=>l.changeStatus(s.id)},"Disable",8,lt)):(r(),m("button",{key:1,class:"btn btn-soft-success mx-2",onClick:b=>l.changeStatus(s.id)},"Enable",8,nt))]),t("td",null,h(l.formatRelativeDate(s.created_at)),1),t("td",null,[t("div",ct,[it,t("ul",rt,[t("li",null,[t("a",{href:"#",class:"dropdown-item edit-item-btn",onClick:b=>l.openEditModal(s)},[ht,D(" Edit ")],8,mt)])])])])]))),128))])])])])])])])])}const _t=p(M,[["render",ut]]);export{_t as default};
